const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UpdateModal-CBBWrBkY.js","assets/ui-vendor-SHwgMfjD.js","assets/react-vendor-CM6QddGd.js","assets/index-oiknFf3A.js","assets/index-Bdto-y-4.css"])))=>i.map(i=>d[i]);
import{j as e,m as s,y as j,z as v,B as g,e as b,a as N,_ as w}from"./ui-vendor-SHwgMfjD.js";import{r as t,N as S,O as k}from"./react-vendor-CM6QddGd.js";import{a as _,b as I,c as d,O as E,S as C,T as O,R as z,u as L,d as V}from"./index-oiknFf3A.js";function H(){const{search:r,searchMovie:n}=_(),{searchHistory:l,removeSearchHistoryItem:u,clearSearchHistory:h}=I(),{search:x}=d(),[m,i]=t.useState(!1),p=()=>{setTimeout(()=>i(!1),200)},[c,o]=t.useState(""),f=a=>{a.key==="Enter"&&n(c)};return t.useEffect(()=>{o(r)},[r]),e.jsx(s.div,{className:"sticky top-0 z-50 flex justify-center",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{type:"tween",duration:.5,ease:"easeOut"},children:e.jsxs(j,{classNames:{wrapper:"max-w-300 p-2"},children:[e.jsx(v,{className:"!flex-none",children:e.jsx(S,{to:"/",className:"flex items-center gap-2",children:e.jsxs(s.div,{layoutId:"app-logo",className:"flex items-end gap-2",children:[e.jsx(s.div,{layoutId:"logo-icon",children:e.jsx(E,{})}),e.jsx(s.p,{layoutId:"logo-text",className:"hidden text-lg font-bold text-inherit md:block",children:"OUONNKI TV"})]})})}),e.jsxs(g,{as:"div",className:"items-center",justify:"end",children:[e.jsxs(s.div,{layoutId:"search-container",className:"flex w-full justify-end",children:[e.jsx(b,{classNames:{base:"max-w-full sm:max-w-[15rem] h-10 hover:max-w-[24rem] transition-all duration-600",mainWrapper:"h-full",input:"text-small",inputWrapper:"h-full font-normal text-default-500 bg-default-400/20 dark:bg-default-500/20"},placeholder:"输入内容搜索...",size:"sm",variant:"flat",startContent:e.jsx(s.div,{layoutId:"search-icon",children:e.jsx(C,{size:18})}),type:"search",radius:"full",value:c,onValueChange:o,onKeyDown:f,onClear:()=>{o("")},onFocus:()=>i(!0),onBlur:p}),m&&x.isSearchHistoryVisible&&l.length>0&&e.jsx("div",{className:"absolute top-12 left-0 w-full px-2",children:e.jsxs(N,{className:"w-full bg-white/80 p-2 shadow-xl backdrop-blur-md dark:bg-black/80",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between px-2 text-xs text-gray-500",children:[e.jsx("span",{children:"搜索历史"}),e.jsx("span",{className:"cursor-pointer hover:text-red-500",onClick:h,children:"清空"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:l.map(a=>e.jsxs("div",{className:"flex cursor-pointer items-center justify-between rounded-lg p-2 hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>{o(a.content),n(a.content),i(!1)},children:[e.jsx("span",{className:"line-clamp-1 text-sm",children:a.content}),e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",onClick:y=>{y.stopPropagation(),u(a.id)},children:e.jsx(O,{size:12})})]},a.id))})]})})]}),e.jsx(s.div,{layoutId:"history-icon",className:"flex items-center rounded-full p-2 transition-all duration-300 hover:cursor-pointer hover:bg-gray-200 active:bg-gray-200",children:e.jsx(z,{})})]})]})})}const T=t.lazy(()=>w(()=>import("./UpdateModal-CBBWrBkY.js"),__vite__mapDeps([0,1,2,3,4])));function D(){const{hasNewVersion:r,setShowUpdateModal:n}=L(),{system:l}=d();return t.useEffect(()=>{r()&&l.isUpdateLogEnabled&&n(!0)},[r,n,l.isUpdateLogEnabled]),e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[e.jsx(t.Suspense,{fallback:null,children:e.jsx(T,{})}),e.jsxs(V,{className:"h-dvh",children:[e.jsx(H,{}),e.jsx("div",{className:"mx-auto max-w-300",children:e.jsx(k,{})})]})]})}export{D as default};
